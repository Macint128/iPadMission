<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>6í•™ë…„ ë£¨í‹´ ë§ˆìŠ¤í„° - ê´€ë¦¬ì ëª¨ë“œ</title>
<style>
    /* [ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ ë° ì¶”ê°€] */
    body { font-family: 'Malgun Gothic', sans-serif; background-color: #f0f4f7; padding: 15px; color: #2c3e50; line-height: 1.4; margin: 0; }
    h1 { text-align: center; color: #37474f; margin: 20px 0; font-size: 1.8em; }
    
    .top-section { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; max-width: 1400px; margin: 0 auto 25px auto; }
    .schedule-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; max-width: 1400px; margin: 0 auto; }

    @media (max-width: 768px) {
        .top-section { grid-template-columns: 1fr; }
        .schedule-layout { grid-template-columns: 1fr; }
    }

    .card { background: white; border-radius: 25px; padding: 22px; box-shadow: 0 8px 20px rgba(0,0,0,0.06); border-top: 8px solid #546e7a; display: flex; flex-direction: column; }
    .card-title { font-size: 1.3em; font-weight: 900; margin-bottom: 15px; border-bottom: 2px solid #eceff1; padding-bottom: 10px; }

    /* ìì‚° ì„¹ì…˜ ê°•í™” */
    .money-display { background: #e0f2f1; border-radius: 20px; border: 2px dashed #00897b; padding: 25px 10px; text-align: center; margin-bottom: 15px; }
    .balance-text { font-size: 2.2em; font-weight: 900; color: #00695c; }
    
    /* ë¡œê·¸ ì•„ì´í…œ: ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ì¶”ê°€ */
    .history-log { flex-grow: 1; min-height: 150px; max-height: 250px; overflow-y: auto; background: #fafafa; border-radius: 15px; padding: 10px; border: 1px solid #eee; }
    .log-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 5px; border-bottom: 1px solid #eee; font-size: 0.85em; }
    .log-actions button { border: none; background: none; cursor: pointer; font-size: 1em; margin-left: 5px; opacity: 0.6; transition: 0.2s; }
    .log-actions button:hover { opacity: 1; transform: scale(1.2); }

    /* ì§„í–‰ë°” ë° ìœ„ì‹œë¦¬ìŠ¤íŠ¸ */
    .wish-gallery-mini { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 15px; }
    .wish-item-mini { position: relative; border-radius: 12px; overflow: hidden; border: 1px solid #e1f5fe; background: #fff; height: 100px; display: flex; align-items: center; justify-content: center; }
    .wish-item-mini img { width: 85%; height: 85%; object-fit: contain; }
    .progress-container { background: #e0e0e0; border-radius: 15px; height: 26px; overflow: hidden; position: relative; border: 2px solid #b3e5fc; }
    .progress-bar { background: linear-gradient(90deg, #03a9f4, #00bcd4); height: 100%; width: 0%; transition: 1s ease; }
    .progress-text { position: absolute; width: 100%; text-align: center; font-size: 0.9em; font-weight: 900; line-height: 26px; }

    /* ëª¨ë‹¬ */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(8px); z-index: 1000; justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 25px; border-radius: 25px; width: 90%; max-width: 320px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); }
    .styled-input { width: 100%; padding: 12px; margin-bottom: 12px; border: 2px solid #eceff1; border-radius: 12px; font-size: 1em; box-sizing: border-box; }
    .btn-main { background: #37474f; color: white; border: none; border-radius: 12px; padding: 12px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 5px; }

    /* ì¼ì • ìŠ¬ë¡¯ */
    .slot { display: flex; margin-bottom: 5px; padding: 7px 10px; background: #f8f9fa; border-radius: 8px; font-size: 0.82em; align-items: center; border-left: 4px solid #cfd8dc; }
    .time { width: 90px; font-weight: bold; color: #546e7a; flex-shrink: 0; }
    .homework-slot { background: #fffde7 !important; border-left-color: #ffb300; }
    .game-slot { background: #f1f8e9 !important; border-left-color: #7cb342; }
</style>
</head>
<body onload="loadAppData()">

    <h1>ğŸ“Š 6í•™ë…„ ë£¨í‹´ ë§ˆìŠ¤í„°</h1>

    <div class="top-section">
        <div class="card" style="border-top-color: #00897b;">
            <div class="card-title">ğŸ’µ ìì‚° í˜„í™©</div>
            <div class="money-display">
                <div class="balance-text" id="balanceDisplay">0 ì›</div>
            </div>
            <div class="history-log" id="historyLog">
                </div>
            <button class="btn-main" onclick="openModal()">ğŸ’° ìƒˆ ê¸°ë¡ ì¶”ê°€</button>
        </div>

        <div class="card" style="border-top-color: #03a9f4;">
            <div class="card-title">ğŸ¯ iPad mini 7 ëª©í‘œ</div>
            <div class="wish-gallery-mini">
                <div class="wish-item-mini"><img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-mini-storage-select-gallery-202410-blue?wid=5120&hei=2880&fmt=webp&qlt=90&.v=bFU5N2g4aXJnREUycExQajkrUEtxVTRQdUZOUjNqOGs3RHc3NGcvUnpJckdTUFZONUxMWEgxK0pDa2Y5Zi93WU9MekhWSGZtV1pvV240QzNuTk80VS9jVTIwcEJjL3Axby9SNE1La0phb1VMWnVmT1FZWitJbkFYcS9vNEVNdmE"></div>
                <div class="wish-item-mini"><img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MX2D3_AV1?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=RS9HODMxaEJXbzdsaDJVZFl6RWJvRlZya2lKWlJmUEwrYndWOTJiVWJWQUYwVmtIbGRkS25RMVpBRlo0bk5DUWRPajhteWtRNjJJTXFPdit4SW9DNnc"></div>
                <div class="wish-item-mini"><img src="https://ecimg.cafe24img.com/pg964b86331718002/longtogether/web/product/small/20250501/448a21f71c3d4e818f17fdd1b817cb9d.jpg"></div>
                <div class="wish-item-mini"><img src="https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/215369728548508-329dfeaa-6735-4fd4-84be-ac8d279b0003.jpg"></div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="goalProgressBar"></div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
            <p style="text-align:center; font-size:0.8em; font-weight:bold; color:#03a9f4; margin-top:10px;">ëª©í‘œ: 1,000,000ì› (D-DAY 4/24)</p>
        </div>
    </div>

    <div class="schedule-layout" id="scheduleGrid"></div>

    <div id="moneyModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle" style="margin-top:0; text-align:center;">ğŸ’° ê¸°ë¡í•˜ê¸°</h3>
            <input type="hidden" id="editIndex">
            <input type="text" id="moneyNote" class="styled-input" placeholder="ë‚´ìš© (ì˜ˆ: ìš©ëˆ)">
            <input type="number" id="moneyAmount" class="styled-input" placeholder="ê¸ˆì•¡ (+/-)">
            <button class="btn-main" onclick="saveRecord()">ì €ì¥í•˜ê¸°</button>
            <button class="btn-main" style="background:#cfd8dc; color:#546e7a;" onclick="closeModal()">ì·¨ì†Œ</button>
        </div>
    </div>

    <script>
        let appData = { balance: 0, logs: [] };
        const GOAL_TOTAL = 1000000;

        function loadAppData() {
            const saved = localStorage.getItem('routine_v25_edit');
            if (saved) appData = JSON.parse(saved);
            renderSchedule();
            updateUI();
        }

        function updateUI() {
            document.getElementById('balanceDisplay').innerText = appData.balance.toLocaleString() + " ì›";
            let p = Math.min(100, Math.floor((appData.balance / GOAL_TOTAL) * 100));
            document.getElementById('goalProgressBar').style.width = p + "%";
            document.getElementById('progressText').innerText = p + "%";

            // ë¡œê·¸ ë Œë”ë§ (í¸ì§‘/ì‚­ì œ ë²„íŠ¼ í¬í•¨)
            const logHTML = appData.logs.map((l, index) => `
                <div class="log-item">
                    <div style="flex:1;"><strong>${l.note}</strong></div>
                    <div style="color:${l.amount < 0 ? '#d32f2f' : '#2e7d32'}; margin: 0 10px;">
                        ${l.amount > 0 ? '+' : ''}${l.amount.toLocaleString()}
                    </div>
                    <div class="log-actions">
                        <button onclick="editRecord(${index})" title="ìˆ˜ì •">âœï¸</button>
                        <button onclick="deleteRecord(${index})" title="ì·¨ì†Œ">âŒ</button>
                    </div>
                </div>
            `).join('');
            document.getElementById('historyLog').innerHTML = logHTML || '<p style="text-align:center; color:#999; font-size:0.8em;">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            
            localStorage.setItem('routine_v25_edit', JSON.stringify(appData));
        }

        // ëª¨ë‹¬ ì—´ê¸° (ìƒˆ ê¸°ë¡)
        function openModal() {
            document.getElementById('modalTitle').innerText = "ğŸ’° ìƒˆ ê¸°ë¡ ì¶”ê°€";
            document.getElementById('editIndex').value = "-1";
            document.getElementById('moneyNote').value = "";
            document.getElementById('moneyAmount').value = "";
            document.getElementById('moneyModal').style.display = 'flex';
        }

        // ëª¨ë‹¬ ì—´ê¸° (ìˆ˜ì •)
        function editRecord(index) {
            const log = appData.logs[index];
            document.getElementById('modalTitle').innerText = "âœï¸ ê¸°ë¡ ìˆ˜ì •";
            document.getElementById('editIndex').value = index;
            document.getElementById('moneyNote').value = log.note;
            document.getElementById('moneyAmount').value = log.amount;
            document.getElementById('moneyModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('moneyModal').style.display = 'none'; }

        // ì €ì¥ (ì¶”ê°€ ë° ìˆ˜ì • í†µí•©)
        function saveRecord() {
            const index = parseInt(document.getElementById('editIndex').value);
            const note = document.getElementById('moneyNote').value || "ì¼ë°˜";
            const amount = parseInt(document.getElementById('moneyAmount').value);

            if (isNaN(amount)) return alert("ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            if (index === -1) {
                // ìƒˆ ê¸°ë¡ ì¶”ê°€
                appData.logs.unshift({ note, amount });
                appData.balance += amount;
            } else {
                // ê¸°ì¡´ ê¸°ë¡ ìˆ˜ì • (ì´ì „ ê¸ˆì•¡ ë¹¼ê³  ìƒˆ ê¸ˆì•¡ ë”í•˜ê¸°)
                appData.balance = appData.balance - appData.logs[index].amount + amount;
                appData.logs[index] = { note, amount };
            }

            updateUI();
            closeModal();
        }

        // ì‚­ì œ (ì·¨ì†Œ)
        function deleteRecord(index) {
            if (confirm("ì´ ê¸°ë¡ì„ ì·¨ì†Œ(ì‚­ì œ)í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                appData.balance -= appData.logs[index].amount;
                appData.logs.splice(index, 1);
                updateUI();
            }
        }

        // [ì¼ì • ë Œë”ë§ - ì—…ë¡œë“œ íŒŒì¼ ê¸°ë°˜]
        function renderSchedule() {
            const game = "ğŸ® Ryujinx Time";
            const shower = "ğŸš¿ ìƒ¤ì›Œ (ê¸°ê¸°ì¢…ë£Œ)";
            const morning = [{t:'07:25-08:15', task:'â° ê¸°ìƒ ë° ë“±êµì¤€ë¹„'}];
            const night = [{t:'21:30-22:00', task:'ğŸª¥ ì·¨ì¹¨ ì¤€ë¹„'}];
            const weekly = [
                { title: "ì›” Â· ëª©ìš”ì¼", s: [...morning, { t: '14:35-15:05', task: 'âœï¸ ìˆ˜í•™ìˆ™ì œ', h: true }, { t: '15:05-15:35', task: game, g: true }, { t: '15:35-16:05', task: 'âœï¸ ì¤‘í•™ìˆ˜í•™', h: true }, { t: '16:05-16:35', task: game, g: true }, { t: '18:30-19:00', task: shower }, ...night]},
                { title: "í™”ìš”ì¼", s: [...morning, { t: '16:00-18:00', task: 'ğŸ’» ì½”ë”© í•™ì›', h: true }, { t: '18:30-19:00', task: shower }, ...night]},
                { title: "ìˆ˜ìš”ì¼", s: [...morning, { t: '13:00-14:00', task: 'ğŸ”¤ ì˜ì–´ ê³¼ì™¸', h: true }, { t: '18:30-19:00', task: shower }, ...night]},
                { title: "ê¸ˆìš”ì¼", s: [...morning, { t: '14:30-15:30', task: 'âœš ìˆ˜í•™ ê³¼ì™¸', h: true }, { t: '18:30-19:00', task: shower }, ...night]},
                { title: "í† ìš”ì¼", s: [{ t: '09:00-11:00', task: 'ğŸ’» ì½”ë”© í•™ì›', h: true }, { t: '13:00-18:30', task: 'âœ¨ ììœ  ì‹œê°„' }, ...night]},
                { title: "ì¼ìš”ì¼", s: [{ t: '09:00-12:00', task: 'âš ï¸ ë¯¸ì™„ë£Œ ìˆ™ì œ ì •ì‚°', ur: true }, { t: '13:00-18:30', task: 'ğŸ® ììœ  ê²Œì„', g: true }, ...night]}
            ];

            let html = "";
            weekly.forEach(day => {
                html += `<div class="card"><div class="card-title">${day.title}</div>`;
                day.s.forEach(item => {
                    html += `<div class="slot ${item.h?'homework-slot':''} ${item.g?'game-slot':''} ${item.ur?'urgent-slot':''}">
                                <span class="time">${item.t}</span><span>${item.task}</span>
                             </div>`;
                });
                html += `</div>`;
            });
            document.getElementById('scheduleGrid').innerHTML = html;
        }
    </script>
</body>
</html>