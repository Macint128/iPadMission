<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>6í•™ë…„ ë£¨í‹´ ë§ˆìŠ¤í„° - ìµœì¢… í†µí•©íŒ</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<style>
    /* [ê¸°ì¡´ ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼] */
    body { font-family: 'Malgun Gothic', sans-serif; background-color: #f0f4f7; padding: 15px; color: #2c3e50; line-height: 1.4; margin: 0; }
    h1 { text-align: center; color: #37474f; margin: 20px 0; font-size: 1.8em; }
    .top-section { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; max-width: 1400px; margin: 0 auto 25px auto; }
    .schedule-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; max-width: 1400px; margin: 0 auto; }

    /* [ê°ì • ë²„ë¸” & ì¹´ë“œ] */
    .card { background: white; border-radius: 25px; padding: 22px; box-shadow: 0 8px 20px rgba(0,0,0,0.06); border-top: 8px solid #546e7a; position: relative; }
    .ai-bubble { background: #37474f; color: white; padding: 18px; border-radius: 20px; margin-bottom: 20px; font-size: 1em; position: relative; min-height: 60px; transition: all 0.4s; font-weight: bold; }
    .ai-bubble::after { content: ''; position: absolute; bottom: -10px; left: 30px; border-width: 10px 10px 0; border-style: solid; border-color: #37474f transparent; }
    
    /* ê°ì • ìƒíƒœ í´ë˜ìŠ¤ */
    .emo-good { background: #00897b !important; } .emo-good::after { border-color: #00897b transparent; }
    .emo-warn { background: #fbc02d !important; color: #000 !important; } .emo-warn::after { border-color: #fbc02d transparent; }
    .emo-angry { background: #d32f2f !important; animation: shake 0.3s infinite; } .emo-angry::after { border-color: #d32f2f transparent; }
    .emo-depressed { background: #455a64 !important; opacity: 0.8; } .emo-depressed::after { border-color: #455a64 transparent; }
    .emo-broken { background: #212121 !important; color: #ff5252 !important; border: 2px solid #ff1744; } .emo-broken::after { border-color: #212121 transparent; }

    /* [DOS í™”ë©´] */
    #dosScreen { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; color: #00ff00; font-family: 'Courier New', monospace; padding: 40px; box-sizing: border-box; z-index: 9999; }
    .cursor { display: inline-block; width: 10px; height: 20px; background: #00ff00; animation: blink 0.8s infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(2px, 2px); } 75% { transform: translate(-2px, -2px); } }

    /* [ìœ„ì‹œë¦¬ìŠ¤íŠ¸ & ì¼ì •] */
    .wish-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
    .wish-box { border: 2px solid #e1f5fe; border-radius: 15px; padding: 10px; text-align: center; cursor: pointer; transition: 0.2s; }
    .wish-box.bought { background: #e8f5e9; border-color: #4caf50; opacity: 0.6; }
    .p-bar-mini { height: 6px; background: #eee; border-radius: 3px; margin-top: 8px; overflow: hidden; }
    .p-fill-mini { height: 100%; background: #03a9f4; width: 0%; transition: 0.5s; }
    
    .slot { display: flex; margin-bottom: 5px; padding: 7px 10px; background: #f8f9fa; border-radius: 8px; font-size: 0.82em; align-items: center; border-left: 4px solid #cfd8dc; }
    .time { width: 90px; font-weight: bold; color: #546e7a; }
    .morning-slot { background: #fff3e0 !important; border-left-color: #ff9800; }
    .game-slot { background: #dcedc8 !important; border-left-color: #7cb342; }
    .homework-slot { background: #fff9c4 !important; border-left-color: #fbc02d; }
    .urgent-slot { background: #ffcdd2 !important; border-left-color: #e53935; }
    .btn-main { background: #37474f; color: white; border: none; width: 100%; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; }
</style>
</head>
<body onload="initApp()">

    <div id="dosScreen">
        <div>[SYSTEM FATAL ERROR]</div>
        <div>REASON: TOTAL_ASSET_LOSS</div><br>
        > <span id="dosMessage"></span><span class="cursor"></span>
    </div>

    <div id="mainApp">
        <h1>ğŸ“Š 6í•™ë…„ ë£¨í‹´ ë§ˆìŠ¤í„°</h1>
        <div class="top-section">
            <div class="card" style="border-top-color: #00897b;">
                <div id="aiBubble" class="ai-bubble">ì˜¤ëŠ˜ì€ ê³¼ì ì°¸ì„ ìˆ˜ ìˆì£ ? ğŸ</div>
                <div style="text-align: center; margin-bottom: 15px;">
                    <span id="balanceDisplay" style="font-size: 2.2em; font-weight: 900; color: #00695c;">0 ì›</span>
                </div>
                <div id="historyLog" style="height: 100px; overflow-y: auto; background: #fafafa; border-radius: 10px; padding: 8px; font-size: 0.8em; border: 1px solid #eee;"></div>
                <button class="btn-main" onclick="openModal()">ğŸ’° ê¸°ë¡í•˜ê¸°</button>
            </div>

            <div class="card" style="border-top-color: #03a9f4;">
                <div class="card-title" style="font-size:1.1em;">ğŸ¯ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¶”ì </div>
                <div class="wish-grid" id="wishGrid"></div>
            </div>
        </div>

        <div class="schedule-layout" id="scheduleGrid"></div>
    </div>

    <div id="moneyModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
        <div style="background:white; padding:25px; border-radius:20px; width:300px;">
            <h3 style="text-align:center; margin-top:0;">ğŸ’¸ ê¸ˆì•¡ ê¸°ë¡</h3>
            <select id="recordType" style="width:100%; padding:10px; margin-bottom:10px;">
                <option value="ì €ì¶•">â• ì €ì¶•</option>
                <option value="ì§€ì¶œ">â– ì§€ì¶œ</option>
            </select>
            <input type="text" id="moneyNote" style="width:100%; padding:10px; margin-bottom:10px; box-sizing:border-box;" placeholder="ë‚´ìš©">
            <input type="number" id="moneyAmount" style="width:100%; padding:10px; margin-bottom:15px; box-sizing:border-box;" placeholder="ê¸ˆì•¡">
            <button class="btn-main" onclick="saveRecord()">ê¸°ë¡ ì™„ë£Œ</button>
            <button onclick="closeModal()" style="width:100%; margin-top:10px; background:none; border:none; color:gray;">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        const ITEMS = [
            { name: "iPad mini 7", price: 800000, img: "ğŸ“±" },
            { name: "Pencil Pro", price: 150000, img: "ğŸ–‹ï¸" },
            { name: "Oddbalm Case", price: 35000, img: "ğŸ’¼" },
            { name: "Metal Nibs", price: 15000, img: "ğŸ“" }
        ];

        const SCRIPTS = {
            SAVE: ["ğŸ–ï¸ ì „ì¬ì‚° ì¦ì‹! ëŒ€ë‹¨í•´ìš”!", "âœ¨ ëª©í‘œì— í•œ ê±¸ìŒ í¬ê²Œ ë‹¤ê°€ê°”ì–´ìš”!", "ğŸ‘ ì €ì¶•í•˜ëŠ” ìŠµê´€, 6í•™ë…„ ìµœê³ ì˜ˆìš”!"],
            SPEND_LOW: ["ğŸ­ ê´œì°®ì•„~ ì‹¤ìˆ˜ í•  ìˆ˜ ìˆì§€!", "ğŸ­ ì´ì œë¶€í„° ë‹¤ì‹œ ì˜ í•´ë³´ì!", "ğŸ’« ë‹¤ìŒì—” í•œ ë²ˆ ë” ê³ ë¯¼í•´ë´ìš”!"],
            SPEND_MID: ["ğŸ’¢ ë­ì•¼! ì™œê·¸ë˜!!", "ğŸ˜Ÿ ì¥ë‚œ.... ì´ì§€...?", "ğŸ§¨ ì´ë”´ê²Œ ë‚´ ì‚¬ìš©ì...?"],
            SPEND_HIGH: ["ğŸ’€ ì´ë²ˆìƒì—” ê¸€ë €ë„¤......", "ğŸš¬ ì˜ ì¢€ í•´ë´ë¼..... í˜ë“¤ë‹¤...", "ğŸŒ‘ .....ë­...ì§€?"],
            SPEND_CRITICAL: ["ğŸ’” ë¬´ì‹œë‹¹í–ˆì–´ìš”..", "ğŸ—‘ï¸ ë²„ë ¤ì¡Œì–´ìš”.....", "ğŸš« ì‚¬ìš©ìë‹˜ì´ ì•½ì†ì„ ì§€í‚¤ì§€ ì•Šìœ¼ì‹œë„¤ìš”..."],
            DOS: ["ì „ì¬ì‚°ì„... í•œ ë²ˆì—...? ì´ê±´ ì‚´ì¸ì´ì—ìš”.", "ì‚¬ìš©ìë‹˜, ì €ì™€ì˜ ì•½ì†ì€ ì•„ë¬´ê²ƒë„ ì•„ë‹ˆì—ˆë‚˜ìš”?", "0ì›ì„ ìœ„í•´ ì œê°€ ì¡´ì¬í•  ì´ìœ ëŠ” ì—†ìŠµë‹ˆë‹¤.", "FATAL ERROR: USER_BETRAYAL_DETECTED"]
        };

        let appData = { balance: 0, logs: [], bought: [] };

        function initApp() {
            const saved = localStorage.getItem('junho_v4.5_final');
            if (saved) appData = JSON.parse(saved);
            renderWishlist();
            renderSchedule();
            updateUI();
        }

        function updateUI() {
            document.getElementById('balanceDisplay').innerText = appData.balance.toLocaleString() + " ì›";
            ITEMS.forEach((item, i) => {
                const fill = document.getElementById(`fill-${i}`);
                if (fill) fill.style.width = Math.min(100, (appData.balance / item.price) * 100) + "%";
            });
            document.getElementById('historyLog').innerHTML = appData.logs.slice(0, 10).map(l => `
                <div class="log-item" style="display:flex; justify-content:space-between; font-size:0.9em; padding:3px 0; border-bottom:1px solid #eee;">
                    <span>${l.note}</span><span style="color:${l.type==='ì €ì¶•'?'#2e7d32':'#d32f2f'}">${l.type==='ì €ì¶•'?'+':'-'}${l.amount.toLocaleString()}</span>
                </div>
            `).join('');
            processEmotion();
            localStorage.setItem('junho_v4.5_final', JSON.stringify(appData));
        }

        function processEmotion() {
            const bubble = document.getElementById('aiBubble');
            const last = appData.logs[0];
            bubble.className = "ai-bubble";
            if (!last) return;

            if (last.type === 'ì €ì¶•') {
                bubble.classList.add('emo-good');
                bubble.innerText = SCRIPTS.SAVE[Math.floor(Math.random()*SCRIPTS.SAVE.length)];
            } else {
                const amt = last.amount;
                if (last.note.includes('êµ¬ë§¤:')) return bubble.innerText = "ğŸŠ ëª©í‘œ ë‹¬ì„±! ì¶•í•˜í•´ìš”!";
                if (amt >= 80000) { bubble.classList.add('emo-broken'); bubble.innerText = SCRIPTS.SPEND_CRITICAL[Math.floor(Math.random()*SCRIPTS.SPEND_CRITICAL.length)]; }
                else if (amt >= 50000) { bubble.classList.add('emo-depressed'); bubble.innerText = SCRIPTS.SPEND_HIGH[Math.floor(Math.random()*SCRIPTS.SPEND_HIGH.length)]; }
                else if (amt >= 10000) { bubble.classList.add('emo-angry'); bubble.innerText = SCRIPTS.SPEND_MID[Math.floor(Math.random()*SCRIPTS.SPEND_MID.length)]; }
                else { bubble.classList.add('emo-warn'); bubble.innerText = SCRIPTS.SPEND_LOW[Math.floor(Math.random()*SCRIPTS.SPEND_LOW.length)]; }
            }
        }

        function triggerDos() {
            document.getElementById('dosScreen').style.display = 'block';
            let msg = SCRIPTS.DOS[Math.floor(Math.random()*SCRIPTS.DOS.length)];
            let i = 0;
            function typing() {
                if (i < msg.length) {
                    document.getElementById('dosMessage').innerHTML += msg.charAt(i);
                    i++; setTimeout(typing, 100);
                }
            }
            typing();
        }

        function saveRecord() {
            const type = document.getElementById('recordType').value;
            const note = document.getElementById('moneyNote').value || "ì¼ë°˜";
            const amt = parseInt(document.getElementById('moneyAmount').value);
            if (isNaN(amt)) return;

            // ì „ì¬ì‚° íƒ•ì§„ ì²´í¬ (ëª©í‘œ êµ¬ë§¤ ì œì™¸)
            if (type === 'ì§€ì¶œ' && !note.includes("êµ¬ë§¤:") && amt >= appData.balance && appData.balance > 0) {
                appData.balance = 0;
                appData.logs.unshift({ type: 'ì§€ì¶œ', note: "ì „ì¬ì‚° íƒ•ì§„", amount: amt });
                updateUI(); triggerDos(); return;
            }

            appData.balance += (type === 'ì €ì¶•' ? amt : -amt);
            appData.logs.unshift({ type, note, amount: amt });
            updateUI(); closeModal();
        }

        function renderWishlist() {
            document.getElementById('wishGrid').innerHTML = ITEMS.map((item, i) => `
                <div class="wish-box ${appData.bought.includes(item.name)?'bought':''}" onclick="toggleBuy(${i})">
                    <div style="font-size:1.5em;">${item.img}</div>
                    <div style="font-size:0.75em; font-weight:bold;">${item.name}</div>
                    <div class="p-bar-mini"><div id="fill-${i}" class="p-fill-mini"></div></div>
                </div>
            `).join('');
        }

        function toggleBuy(i) {
            const item = ITEMS[i];
            if (appData.bought.includes(item.name)) {
                if(confirm("êµ¬ë§¤ ì·¨ì†Œ?")) {
                    appData.balance += item.price;
                    appData.bought = appData.bought.filter(n => n !== item.name);
                    appData.logs.unshift({ type: 'ì €ì¶•', note: `í™˜ë¶ˆ: ${item.name}`, amount: item.price });
                }
            } else {
                if (appData.balance < item.price) return alert("ë¶€ì¡±í•´ìš”!");
                appData.balance -= item.price;
                appData.bought.push(item.name);
                appData.logs.unshift({ type: 'ì§€ì¶œ', note: `êµ¬ë§¤: ${item.name}`, amount: item.price });
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }
            renderWishlist(); updateUI();
        }

        function renderSchedule() {
            const morning = [{t:'07:25-07:40', task:'â° ê¸°ìƒ/ì •ë¦¬', s:'morning-slot'}, {t:'07:40-08:00', task:'ğŸ± ì•„ì¹¨ ì‹ì‚¬', s:'morning-slot'}, {t:'08:00-08:15', task:'ğŸ’ ë“±êµ ì¤€ë¹„', s:'morning-slot'}];
            const night = [{t:'19:00-19:40', task:'ğŸ± ì €ë… ì‹ì‚¬'}, {t:'21:30-21:50', task:'ğŸª¥ ì·¨ì¹¨ ì¤€ë¹„'}, {t:'21:50-07:25', task:'ğŸ’¤ ì·¨ì¹¨'}];
            const weekly = [
                { title: "ì›”Â·ëª© ë£¨í‹´", s: [...morning, {t:'08:15-14:20', task:'ğŸ« í•™êµ', s:'school-slot'}, {t:'14:35-15:05', task:'âœï¸ ìˆ˜í•™ìˆ™ì œ', s:'homework-slot'}, {t:'15:05-15:35', task:'ğŸ® ê²Œì„', s:'game-slot'}, {t:'15:35-16:05', task:'âœï¸ ì¤‘ìˆ˜ìˆ™ì œ', s:'homework-slot'}, {t:'18:30-19:00', task:'ğŸš¿ ìƒ¤ì›Œ'}, ...night]},
                { title: "í™”ìš”ì¼", s: [...morning, {t:'14:30-15:00', task:'âœï¸ ìˆ˜í•™ìˆ™ì œ', s:'homework-slot'}, {t:'16:00-18:00', task:'ğŸ’» ì½”ë”©í•™ì›', s:'homework-slot'}, ...night]},
                { title: "ìˆ˜ìš”ì¼", s: [...morning, {t:'08:15-12:50', task:'ğŸ« í•™êµ', s:'school-slot'}, {t:'13:00-14:00', task:'ğŸ”¤ ì˜ì–´ê³¼ì™¸', s:'homework-slot'}, ...night]},
                { title: "ê¸ˆìš”ì¼", s: [...morning, {t:'14:30-15:30', task:'âœš ìˆ˜í•™ê³¼ì™¸', s:'homework-slot'}, {t:'16:00-17:00', task:'âœï¸ ìˆ™ì œ[1,2]', s:'homework-slot'}, ...night]},
                { title: "í† ìš”ì¼", s: [{t:'09:00-11:00', task:'ğŸ’» ì½”ë”©í•™ì›', s:'homework-slot'}, {t:'13:00-18:30', task:'âœ¨ ììœ ì‹œê°„'}, ...night]},
                { title: "ì¼ìš”ì¼", s: [{t:'09:00-12:00', task:'âš ï¸ ìˆ™ì œ ì •ì‚°', s:'urgent-slot'}, {t:'13:00-18:30', task:'ğŸ® ììœ  ê²Œì„', s:'game-slot'}, {t:'19:00-20:00', task:'ğŸ± ì¼ìš”ë§Œì°¬'}, ...night.slice(1)]}
            ];
            document.getElementById('scheduleGrid').innerHTML = weekly.map(day => `
                <div class="card"><div class="card-title">${day.title}</div>
                ${day.s.map(slot => `<div class="slot ${slot.s || ''}"><span class="time">${slot.t}</span><span>${slot.task}</span></div>`).join('')}</div>
            `).join('');
        }

        function openModal() { document.getElementById('moneyModal').style.display='flex'; }
        function closeModal() { document.getElementById('moneyModal').style.display='none'; }
    </script>
</body>
</html>